{% extends "base.html" %}

{% block content %}
<div class="min-h-screen p-8">
    <div class="max-w-6xl mx-auto">
        <div class="mb-12 text-center">
            {% set emotion = request.args.get('emotion_id')|int %}
            {% if emotion == 1 %}
                <div class="text-6xl mb-4 animate-bounce">ğŸ˜Š</div>
                <p class="text-xl text-gray-600">å¿ƒæƒ…æ„‰æ‚¦ï¼Œä¸ºæ‚¨æ¨èè¿™äº›ç¾é£Ÿ</p>
            {% elif emotion == 2 %}
                <div class="text-6xl mb-4 animate-pulse">ğŸ˜ª</div>
                <p class="text-xl text-gray-600">æ„Ÿåˆ°ç–²æƒ«æ—¶ï¼Œæ¥ç‚¹æš–å¿ƒçš„é£Ÿç‰©å§</p>
            {% elif emotion == 3 %}
                <div class="text-6xl mb-4 animate-pulse">ğŸ˜°</div>
                <p class="text-xl text-gray-600">åˆ«æ‹…å¿ƒï¼Œè¿™äº›ç¾é£Ÿèƒ½è®©æ‚¨å¹³é™ä¸‹æ¥</p>
            {% elif emotion == 4 %}
                <div class="text-6xl mb-4 animate-bounce">ğŸ˜ </div>
                <p class="text-xl text-gray-600">æ¥ç‚¹ç¾é£Ÿï¼Œæ¶ˆæ¶ˆæ°”å§</p>
            {% elif emotion == 5 %}
                <div class="text-6xl mb-4 animate-pulse">ğŸ˜¢</div>
                <p class="text-xl text-gray-600">è¿™äº›æ¸©æš–çš„ç¾é£Ÿä¼šè®©æ‚¨æ„Ÿè§‰å¥½äº›</p>
            {% endif %}
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {% for recipe in recipes %}
            <a href="{{ url_for('recipes.detail', recipe_id=recipe.id) }}" class="block group">
                <div class="recipe-card rounded-xl shadow-lg overflow-hidden transform transition-all duration-300 hover:-translate-y-2 hover:shadow-xl">
                    <div class="relative">
                        <img src="{{ recipe.image_url }}" alt="{{ recipe.name }}" class="w-full h-48 object-cover">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                    </div>
                    
                    <div class="p-6 {% if 'ç”œç‚¹' in recipe.tags|map(attribute='name') %}bg-gradient-to-br from-pink-50 to-orange-50
                                {% elif 'æ±¤' in recipe.tags|map(attribute='name') %}bg-gradient-to-br from-blue-50 to-cyan-50
                                {% elif 'è¾£' in recipe.tags|map(attribute='name') %}bg-gradient-to-br from-red-50 to-orange-50
                                {% elif 'å…»ç”Ÿ' in recipe.tags|map(attribute='name') %}bg-gradient-to-br from-green-50 to-emerald-50
                                {% else %}bg-gradient-to-br from-purple-50 to-indigo-50{% endif %}">
                        
                        <h3 class="text-xl font-semibold mb-3 {% if 'ç”œç‚¹' in recipe.tags|map(attribute='name') %}text-pink-700
                                {% elif 'æ±¤' in recipe.tags|map(attribute='name') %}text-blue-700
                                {% elif 'è¾£' in recipe.tags|map(attribute='name') %}text-red-700
                                {% elif 'å…»ç”Ÿ' in recipe.tags|map(attribute='name') %}text-green-700
                                {% else %}text-purple-700{% endif %}">
                            {{ recipe.name }}
                        </h3>
                        
                        <p class="text-gray-600 mb-4 line-clamp-2">{{ recipe.description }}</p>
                        
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-4">
                                <span class="text-sm text-gray-500 flex items-center">
                                    <i class="fas fa-clock mr-1"></i>
                                    {{ recipe.cooking_time }}åˆ†é’Ÿ
                                </span>
                                <span class="text-sm text-gray-500">
                                    {{ recipe.difficulty }}
                                </span>
                            </div>
                            <span class="text-sm text-gray-500">
                                {{ recipe.calories }}å¡è·¯é‡Œ
                            </span>
                        </div>

                        <div class="flex flex-wrap gap-2 mb-4">
                            {% for tag in recipe.tags %}
                            <span class="px-2 py-1 text-xs rounded-full {% if tag.name == 'ç”œç‚¹' %}bg-pink-100 text-pink-700
                                        {% elif tag.name == 'æ±¤' %}bg-blue-100 text-blue-700
                                        {% elif tag.name == 'è¾£' %}bg-red-100 text-red-700
                                        {% elif tag.name == 'å…»ç”Ÿ' %}bg-green-100 text-green-700
                                        {% else %}bg-purple-100 text-purple-700{% endif %}">
                                {{ tag.name }}
                            </span>
                            {% endfor %}
                        </div>

                        <div class="flex justify-end">
                            <button onclick="event.preventDefault(); toggleFavorite({{ recipe.id }})" 
                                    class="favorite-btn text-gray-400 hover:text-yellow-500 transition-colors">
                                <i class="fas fa-heart text-xl"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
</div>

<style>
.recipe-card {
    backdrop-filter: blur(8px);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.recipe-card:hover {
    transform: translateY(-8px);
}

.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* æ¸å˜èƒŒæ™¯åŠ¨ç”» */
@keyframes gradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.recipe-card > div:last-child {
    background-size: 200% 200%;
    animation: gradient 15s ease infinite;
}

/* æ”¶è—æŒ‰é’®åŠ¨ç”» */
.favorite-btn {
    transition: transform 0.2s ease;
}

.favorite-btn:hover {
    transform: scale(1.2);
}

/* æ ‡ç­¾æ‚¬æµ®æ•ˆæœ */
.recipe-card span {
    transition: all 0.2s ease;
}

.recipe-card span:hover {
    transform: translateY(-2px);
}
</style>
{% endblock %} 